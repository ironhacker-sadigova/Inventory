<?php
/**
 * Vue générale d'une Cell
 * @author valentin.claras
 * @author diana.dragusin
 * @package Orga
 */
?>

<div class="page-header">
    <h1><?=$this->pageTitle?></h1>
</div>
<div class="row-fluid">
<? if ($this->displayNavigationPanel !== false) { ?>
    <div class="well span" id="navigationPanel">
<?= $this->partial('cell/navigation.phtml', ['cell' => $this->cell, 'isParentCellReachable' => $this->isParentCellReachable])?>
    </div>
    <div id="navigationClose" class="span">
        <i class="icon-arrow-down"></i>
        <span><?=__('Orga', 'navigation', 'hideOrganization')?></span>
        <i class="icon-arrow-down"></i>
    </div>
<? } ?>
    <div id="navigationContent" class="span">
<?php

$this->tabView->display();

$script = '';
$script .= '$(\'#navigationClose\').click(';
$script .= 'function() {';
$script .= 'if ($(\'#navigationPanel\').css(\'display\') == \'none\') {';
$script .= '$(\'#navigationClose i\').removeClass(\'icon-arrow-up\');';
$script .= '$(\'#navigationClose i\').addClass(\'icon-arrow-down\');';
$script .= '$(\'#navigationClose span\').html(\''.__('Orga', 'navigation', 'hideOrganization').'\');';
$script .= '} else {';
$script .= '$(\'#navigationClose i\').removeClass(\'icon-arrow-down\');';
$script .= '$(\'#navigationClose i\').addClass(\'icon-arrow-up\');';
$script .= '$(\'#navigationClose span\').html(\''.__('Orga', 'navigation', 'displayOrganization').'\');';
$script .= '}';
$script .= '$(\'#navigationPanel\').animate({width: "toggle"}, 50);';
$script .= '});';

$this->headScript()->appendScript('$(document).ready(function(){'.$script.'});');
?>
    </div>
</div>
